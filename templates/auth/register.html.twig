{% extends 'base.html.twig' %}

{% block title %}{{ title|default('Create account') }}{% endblock %}

{% block styles %}
  <style>
    :root { --bg:#0b0b0c; --card:#16171a; --text:#e7e7ea; --muted:#a0a3aa; --accent:#67e8f9; }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif}
    .wrap{max-width:720px;margin:40px auto;padding:0 20px}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    header{position:sticky;top:0;z-index:10;backdrop-filter:blur(6px);background:rgba(11,11,12,.7);display:flex;align-items:center;justify-content:space-between;gap:10px;margin:-16px -20px 24px -20px;padding:16px 20px}
    h1{font-size:1.5rem;margin:0}
    .card{background:var(--card);border-radius:12px;overflow:hidden}
    .meta{padding:16px}
    form{display:grid;gap:12px;margin-top:8px}
    label{font-weight:600}
    input{padding:10px 12px;border:1px solid #2a2b2f;border-radius:8px;background:#101114;color:var(--text);width:100%}
    .help{color:var(--muted);font-size:.9rem;margin-top:4px}
    .errors{background:#3b0a0a;border:1px solid #742a2a;color:#ffd2d2;padding:10px;border-radius:8px;margin-bottom:12px}
    .actions{display:flex;gap:8px;align-items:center}
    button{background:#1f2937;border:1px solid #2a2b2f;color:#fff;border-radius:8px;padding:8px 12px;cursor:pointer}
    button:hover{background:#232f41}
  </style>
{% endblock %}

{% block header %}
  <div class="wrap">
    <header>
      <h1><a href="/" style="color:inherit;text-decoration:none">My Music Collection</a></h1>
      <nav style="display:flex;gap:10px;align-items:center">
        <a href="/about" class="muted">About</a>
        <a href="/register">Register</a>
        <a href="/login">Sign in</a>
      </nav>
    </header>
  </div>
{% endblock %}

{% block content %}
  <div class="wrap">
    <div class="card">
      <div class="meta">
        <h2 style="margin:0 0 8px 0">Create account</h2>
        {% if errors %}
          <div class="errors">
            <ul>
              {% for e in errors %}<li>{{ e }}</li>{% endfor %}
            </ul>
          </div>
        {% endif %}
        <form method="post" action="/register">
          <input type="hidden" name="_token" value="{{ csrf_token }}">
          <div>
            <label>Username</label>
            <input type="text" name="username" value="{{ old.username|default('') }}" autocomplete="username" required minlength="3" maxlength="32" pattern="[A-Za-z0-9_.-]{3,32}" title="3–32 characters: letters, numbers, dot, underscore, or hyphen" />
            <div class="help">3–32 characters. Allowed: letters, numbers, dot (.), underscore (_), hyphen (-).</div>
          </div>
          <div>
            <label>Email</label>
            <input type="email" name="email" value="{{ old.email|default('') }}" autocomplete="email" required />
          </div>
          <div>
            <label>Password</label>
            <input type="password" name="password" autocomplete="new-password" required minlength="8" />
            <div class="help">At least 8 characters.</div>
          </div>
          <div>
            <label>Confirm password</label>
            <input type="password" name="confirm" autocomplete="new-password" required />
          </div>
          <div class="actions">
            <button type="submit">Create account</button>
            <a href="/login">Sign in</a>
          </div>
        </form>
      </div>
    </div>
  </div>
{% endblock %}
