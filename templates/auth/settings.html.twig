{% extends 'base.html.twig' %}

{% block title %}{{ title|default('Settings') }}{% endblock %}

{% block styles %}
  <style>
    .card{background:var(--card);border-radius:12px;overflow:hidden}
    .meta{padding:24px}
    form{display:grid;gap:16px;margin-top:16px}
    label{font-weight:600;display:block;margin-bottom:8px}
    input{padding:10px 12px;border:1px solid #2a2b2f;border-radius:8px;background:#101114;color:var(--text);width:100%}
    .msg{margin:8px 0;padding:10px;border-radius:8px}
    .ok{background:#0c3b21;border:1px solid #1e6b3a;color:#d6ffe6}
    .err{background:#3b0a0a;border:1px solid #742a2a;color:#ffd2d2}
    .actions{display:flex;gap:12px;align-items:center;margin-top:8px}
    button{background:var(--accent);border:0;color:#000;border-radius:8px;padding:10px 20px;cursor:pointer;font-weight:bold}
    button:hover{opacity:.9}
  </style>
{% endblock %}

{% block breadcrumbs %}
  <nav class="breadcrumbs">
    <div>
      <a href="/">Home</a>
      <span>/</span>
      Settings
    </div>
  </nav>
{% endblock %}

{% block content %}
  <div class="wrap content-wrap">
    <div class="card">
      <div class="meta">
        <h1 style="margin:0 0 16px 0">Settings</h1>
        {% if saved %}<div class="msg ok">Saved</div>{% endif %}
        {% if error %}<div class="msg err">{{ error }}</div>{% endif %}

        <form method="post" action="/settings">
                  <input type="hidden" name="_token" value="{{ csrf_token }}">
          <div>
            <label>Discogs username</label>
            <input type="text" name="discogs_username" value="{{ discogs_username|default('') }}">
          </div>
          <div>
            <label>Discogs user token</label>
            <input type="password" name="discogs_token" value="{{ discogs_token|default('') }}" autocomplete="off">
          </div>
          <div style="display:flex;align-items:center;gap:10px;margin:8px 0">
            <input type="checkbox" name="discogs_search_exclude_title" value="1" id="exclude_title" {{ discogs_search_exclude_title ? 'checked' : '' }} style="width:auto">
            <label for="exclude_title" style="font-weight:normal;cursor:pointer">Exclude Discogs search results that match existing release titles in my collection/wantlist</label>
          </div>
          <div class="actions">
            <button type="submit">Save</button>
            <a href="/">Back to home</a>
          </div>
        </form>
      </div>
    </div>
  </div>
{% endblock %}
